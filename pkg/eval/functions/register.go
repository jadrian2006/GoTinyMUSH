package functions

import (
	"github.com/crystal-mush/gotinymush/pkg/eval"
)

// RegisterAll registers all built-in functions on the given EvalContext.
func RegisterAll(ctx *eval.EvalContext) {
	// Math functions
	ctx.RegisterFunction("ADD", fnAdd, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SUB", fnSub, 2, 0)
	ctx.RegisterFunction("MUL", fnMul, 0, eval.FnVarArgs)
	ctx.RegisterFunction("DIV", fnDiv, 2, 0)
	ctx.RegisterFunction("FDIV", fnFdiv, 2, 0)
	ctx.RegisterFunction("MOD", fnModulo, 2, 0)
	ctx.RegisterFunction("MODULO", fnModulo, 2, 0)    // alias
	ctx.RegisterFunction("REMAINDER", fnModulo, 2, 0) // alias
	ctx.RegisterFunction("ABS", fnAbs, 1, 0)
	ctx.RegisterFunction("SIGN", fnSign, 1, 0)
	ctx.RegisterFunction("INC", fnInc, 1, 0)
	ctx.RegisterFunction("DEC", fnDec, 1, 0)
	ctx.RegisterFunction("ROUND", fnRound, 2, 0)
	ctx.RegisterFunction("TRUNC", fnTrunc, 1, 0)
	ctx.RegisterFunction("FLOOR", fnFloor, 1, 0)
	ctx.RegisterFunction("CEIL", fnCeil, 1, 0)
	ctx.RegisterFunction("SQRT", fnSqrt, 1, 0)
	ctx.RegisterFunction("POWER", fnPower, 2, 0)
	ctx.RegisterFunction("MAX", fnMax, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MIN", fnMin, 0, eval.FnVarArgs)
	ctx.RegisterFunction("PI", fnPi, 0, 0)
	ctx.RegisterFunction("E", fnE, 0, 0)

	// Trigonometric
	ctx.RegisterFunction("SIN", fnSin, 1, 0)
	ctx.RegisterFunction("SIND", fnSind, 1, 0)
	ctx.RegisterFunction("COS", fnCos, 1, 0)
	ctx.RegisterFunction("COSD", fnCosd, 1, 0)
	ctx.RegisterFunction("TAN", fnTan, 1, 0)
	ctx.RegisterFunction("TAND", fnTand, 1, 0)
	ctx.RegisterFunction("ASIN", fnAsin, 1, 0)
	ctx.RegisterFunction("ASIND", fnAsind, 1, 0)
	ctx.RegisterFunction("ACOS", fnAcos, 1, 0)
	ctx.RegisterFunction("ACOSD", fnAcosd, 1, 0)
	ctx.RegisterFunction("ATAN", fnAtan, 1, 0)
	ctx.RegisterFunction("ATAND", fnAtand, 1, 0)

	// Exponential/Logarithmic
	ctx.RegisterFunction("EXP", fnExp, 1, 0)
	ctx.RegisterFunction("LN", fnLn, 1, 0)
	ctx.RegisterFunction("LOG", fnLog, 1, 0)

	// Bitwise
	ctx.RegisterFunction("SHL", fnShl, 2, 0)
	ctx.RegisterFunction("SHR", fnShr, 2, 0)
	ctx.RegisterFunction("BAND", fnBand, 2, 0)
	ctx.RegisterFunction("BOR", fnBor, 2, 0)
	ctx.RegisterFunction("BNAND", fnBnand, 2, 0)

	// Additional math
	ctx.RegisterFunction("FLOORDIV", fnFloordiv, 2, 0)
	ctx.RegisterFunction("DIST2D", fnDist2d, 4, 0)
	ctx.RegisterFunction("DIST3D", fnDist3d, 6, 0)
	ctx.RegisterFunction("ALPHAMAX", fnAlphamax, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ALPHAMIN", fnAlphamin, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ATAN2", fnAtan2, 2, 0)
	ctx.RegisterFunction("BOUND", fnBound, 3, 0)
	ctx.RegisterFunction("AVG", fnAvg, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MEDIAN", fnMedian, 0, eval.FnVarArgs)

	// Comparison
	ctx.RegisterFunction("GT", fnGt, 2, 0)
	ctx.RegisterFunction("GTE", fnGte, 2, 0)
	ctx.RegisterFunction("LT", fnLt, 2, 0)
	ctx.RegisterFunction("LTE", fnLte, 2, 0)
	ctx.RegisterFunction("EQ", fnEq, 2, 0)
	ctx.RegisterFunction("NEQ", fnNeq, 2, 0)
	ctx.RegisterFunction("COMP", fnComp, 2, 0)
	ctx.RegisterFunction("STREQ", fnStreq, 2, 0)
	ctx.RegisterFunction("NCOMP", fnNcomp, 2, 0)

	// Logic
	ctx.RegisterFunction("AND", fnAnd, 0, eval.FnVarArgs)
	ctx.RegisterFunction("OR", fnOr, 0, eval.FnVarArgs)
	ctx.RegisterFunction("XOR", fnXor, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NOT", fnNot, 1, 0)
	ctx.RegisterFunction("NOTBOOL", fnNotBool, 1, 0)
	ctx.RegisterFunction("T", fnT, 1, 0)
	ctx.RegisterFunction("ANDBOOL", fnAndbool, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ORBOOL", fnOrbool, 0, eval.FnVarArgs)
	ctx.RegisterFunction("XORBOOL", fnXorbool, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CAND", fnCand, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("CANDBOOL", fnCandbool, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("COR", fnCor, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("CORBOOL", fnCorbool, 0, eval.FnVarArgs|eval.FnNoEval)

	// Conditionals
	ctx.RegisterFunction("IF", fnIf, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("IFELSE", fnIfElse, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("NONZERO", fnIf, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("SWITCH", fnSwitch, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("SWITCHALL", fnSwitchAll, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("CASE", fnCase, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("IFFALSE", fnIffalse, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("IFTRUE", fnIftrue, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("IFZERO", fnIfzero, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("USETRUE", fnUsetrue, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("USEFALSE", fnUsefalse, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("ISFALSE", fnIsfalse, 1, 0)
	ctx.RegisterFunction("ISTRUE", fnIstrue, 1, 0)
	ctx.RegisterFunction("UDEFAULT", fnUdefault, 2, eval.FnNoEval)

	// String functions
	ctx.RegisterFunction("CAT", fnCat, 0, eval.FnVarArgs)
	ctx.RegisterFunction("STRCAT", fnStrcat, 0, eval.FnVarArgs)
	ctx.RegisterFunction("STRLEN", fnStrlen, 1, 0)
	ctx.RegisterFunction("MID", fnMid, 3, 0)
	ctx.RegisterFunction("LEFT", fnLeft, 2, 0)
	ctx.RegisterFunction("STRTRUNC", fnLeft, 2, 0)
	ctx.RegisterFunction("RIGHT", fnRight, 2, 0)
	ctx.RegisterFunction("LCSTR", fnLcstr, 1, 0)
	ctx.RegisterFunction("UCSTR", fnUcstr, 1, 0)
	ctx.RegisterFunction("CAPSTR", fnCapstr, 1, 0)
	ctx.RegisterFunction("POS", fnPos, 2, 0)
	ctx.RegisterFunction("LPOS", fnLpos, 0, eval.FnVarArgs)
	ctx.RegisterFunction("EDIT", fnEdit, 3, 0)
	ctx.RegisterFunction("REPLACE", fnReplace, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TRIM", fnTrim, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SQUISH", fnSquish, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LJUST", fnLjust, 0, eval.FnVarArgs)
	ctx.RegisterFunction("RJUST", fnRjust, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CENTER", fnCenter, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REPEAT", fnRepeat, 2, 0)
	ctx.RegisterFunction("SPACE", fnSpace, 1, 0)
	ctx.RegisterFunction("ESCAPE", fnEscape, 1, 0)
	ctx.RegisterFunction("SECURE", fnSecure, 1, 0)
	ctx.RegisterFunction("ANSI", fnAnsi, 2, 0)
	ctx.RegisterFunction("STRIPANSI", fnStripansi, 1, 0)
	ctx.RegisterFunction("BEFORE", fnBefore, 0, eval.FnVarArgs)
	ctx.RegisterFunction("AFTER", fnAfter, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REVERSE", fnReverse, 1, 0)
	ctx.RegisterFunction("SCRAMBLE", fnScramble, 1, 0)
	ctx.RegisterFunction("STRMATCH", fnStrmatch, 2, 0)
	ctx.RegisterFunction("MATCH", fnMatch, 0, eval.FnVarArgs)
	ctx.RegisterFunction("DELETE", fnDelete, 3, 0)
	ctx.RegisterFunction("CHOMP", fnChomp, 1, 0)
	ctx.RegisterFunction("TRANSLATE", fnTranslate, 0, eval.FnVarArgs)

	// Border/formatting functions
	ctx.RegisterFunction("BORDER", fnBorder, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CBORDER", fnCborder, 0, eval.FnVarArgs)
	ctx.RegisterFunction("RBORDER", fnRborder, 0, eval.FnVarArgs)

	// Additional string functions
	ctx.RegisterFunction("ART", fnArt, 1, 0)
	ctx.RegisterFunction("NESCAPE", fnNescape, 1, 0)
	ctx.RegisterFunction("NSECURE", fnNsecure, 1, 0)
	ctx.RegisterFunction("WORDPOS", fnWordpos, 0, eval.FnVarArgs)
	ctx.RegisterFunction("INDEX", fnIndex, 4, 0)
	ctx.RegisterFunction("ENCRYPT", fnEncrypt, 2, 0)
	ctx.RegisterFunction("DECRYPT", fnDecrypt, 2, 0)
	ctx.RegisterFunction("HTML_ESCAPE", fnHtmlEscape, 1, 0)
	ctx.RegisterFunction("HTML_UNESCAPE", fnHtmlUnescape, 1, 0)
	ctx.RegisterFunction("URL_ESCAPE", fnUrlEscape, 1, 0)
	ctx.RegisterFunction("URL_UNESCAPE", fnUrlUnescape, 1, 0)
	ctx.RegisterFunction("ANSIPOS", fnAnsipos, 2, 0)
	ctx.RegisterFunction("SPEAK", fnSpeak, 0, eval.FnVarArgs)
	ctx.RegisterFunction("WILDMATCH", fnWildmatch, 2, 0)

	// Additional string functions (RhostMUSH)
	ctx.RegisterFunction("PRINTF", fnPrintf, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TR", fnTr, 3, 0)
	ctx.RegisterFunction("STRDISTANCE", fnStrdistance, 2, 0)
	ctx.RegisterFunction("STRLENVIS", fnStrlenvis, 1, 0)

	// Type/character class checking
	ctx.RegisterFunction("ISNUM", fnIsnum, 1, 0)
	ctx.RegisterFunction("ISDBREF", fnIsdbref, 1, 0)
	ctx.RegisterFunction("ISWORD", fnIsword, 1, 0)
	ctx.RegisterFunction("ISALNUM", fnIsalnum, 1, 0)
	ctx.RegisterFunction("ISALPHA", fnIsalpha, 1, 0)
	ctx.RegisterFunction("ISDIGIT", fnIsdigit, 1, 0)
	ctx.RegisterFunction("ISUPPER", fnIsupper, 1, 0)
	ctx.RegisterFunction("ISLOWER", fnIslower, 1, 0)
	ctx.RegisterFunction("ISSPACE", fnIsspace, 1, 0)
	ctx.RegisterFunction("ISPUNCT", fnIspunct, 1, 0)

	// List functions
	ctx.RegisterFunction("WORDS", fnWords, 0, eval.FnVarArgs)
	ctx.RegisterFunction("FIRST", fnFirst, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REST", fnRest, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LAST", fnLast, 0, eval.FnVarArgs)
	ctx.RegisterFunction("EXTRACT", fnExtract, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ELEMENTS", fnElements, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LNUM", fnLnum, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MEMBER", fnMember, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REMOVE", fnRemove, 0, eval.FnVarArgs)
	ctx.RegisterFunction("INSERT", fnInsert, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LDELETE", fnLdelete, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SORT", fnSort, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SETUNION", fnSetunion, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LUNION", fnSetunion, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SETDIFF", fnSetdiff, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LDIFF", fnSetdiff, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SETINTER", fnSetinter, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LINTER", fnSetinter, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REVWORDS", fnRevwords, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SHUFFLE", fnShuffle, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ITEMIZE", fnItemize, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SPLICE", fnSplice, 0, eval.FnVarArgs)
	ctx.RegisterFunction("GRAB", fnGrab, 0, eval.FnVarArgs)
	ctx.RegisterFunction("GRABALL", fnGraball, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MATCHALL", fnMatchall, 0, eval.FnVarArgs)

	// List math/logic
	ctx.RegisterFunction("LADD", fnLadd, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LMAX", fnLmax, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LMIN", fnLmin, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LAND", fnLand, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LOR", fnLor, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LANDBOOL", fnLandbool, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LORBOOL", fnLorbool, 0, eval.FnVarArgs)

	// Additional list functions
	ctx.RegisterFunction("SORTBY", fnSortby, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LREPLACE", fnLreplace, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LEDIT", fnLedit, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ISORT", fnIsort, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MERGE", fnMerge, 3, 0)
	ctx.RegisterFunction("CHOOSE", fnChoose, 0, eval.FnVarArgs)
	ctx.RegisterFunction("GROUP", fnGroup, 0, eval.FnVarArgs)
	ctx.RegisterFunction("WILDGREP", fnWildgrep, 3, 0)

	// Vector math
	ctx.RegisterFunction("VADD", fnVadd, 2, 0)
	ctx.RegisterFunction("VSUB", fnVsub, 2, 0)
	ctx.RegisterFunction("VMUL", fnVmul, 2, 0)
	ctx.RegisterFunction("VDOT", fnVdot, 2, 0)
	ctx.RegisterFunction("VMAG", fnVmag, 1, 0)
	ctx.RegisterFunction("VUNIT", fnVunit, 1, 0)
	ctx.RegisterFunction("VDIM", fnVdim, 1, 0)
	ctx.RegisterFunction("VCROSS", fnVcross, 2, 0)
	ctx.RegisterFunction("VDIST", fnVdist, 2, 0)
	ctx.RegisterFunction("VLERP", fnVlerp, 3, 0)
	ctx.RegisterFunction("VNEAR", fnVnear, 3, 0)
	ctx.RegisterFunction("VCLAMP", fnVclamp, 3, 0)

	// Iteration
	ctx.RegisterFunction("ITER", fnIter, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("PARSE", fnParse, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("MAP", fnMap, 0, eval.FnVarArgs)
	ctx.RegisterFunction("FILTER", fnFilter, 0, eval.FnVarArgs)
	ctx.RegisterFunction("FOLD", fnFold, 0, eval.FnVarArgs)
	ctx.RegisterFunction("FOREACH", fnForeach, 0, eval.FnVarArgs)
	ctx.RegisterFunction("WHILE", fnWhile, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ILEV", fnIlev, 0, 0)
	ctx.RegisterFunction("ITEXT", fnItext, 1, 0)
	ctx.RegisterFunction("INUM", fnInum, 1, 0)
	ctx.RegisterFunction("STEP", fnStep, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MIX", fnMix, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MUNGE", fnMunge, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ITER2", fnIter2, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("WHENTRUE", fnWhentrue, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("WHENFALSE", fnWhenfalse, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("FILTERBOOL", fnFilterbool, 0, eval.FnVarArgs)
	ctx.RegisterFunction("UNTIL", fnUntil, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LOOP", fnLoop, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("LIST", fnList, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("LIST2", fnList2, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("WHENTRUE2", fnWhentrue2, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("WHENFALSE2", fnWhenfalse2, 0, eval.FnVarArgs|eval.FnNoEval)

	// Registers
	ctx.RegisterFunction("SETQ", fnSetq, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SETR", fnSetr, 2, 0)
	ctx.RegisterFunction("R", fnR, 1, 0)
	ctx.RegisterFunction("X", fnX, 1, 0)
	ctx.RegisterFunction("SETX", fnSetx, 2, 0)
	ctx.RegisterFunction("LREGS", fnLregs, 0, 0)
	ctx.RegisterFunction("QVARS", fnQvars, 0, eval.FnVarArgs)
	ctx.RegisterFunction("XVARS", fnXvars, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CLEARVARS", fnClearvars, 0, 0)
	ctx.RegisterFunction("LET", fnLet, 0, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("LOCALIZE", fnLocalize, 1, eval.FnNoEval)
	ctx.RegisterFunction("PRIVATE", fnPrivate, 1, eval.FnNoEval)
	ctx.RegisterFunction("UPRIVATE", fnUprivate, 0, eval.FnVarArgs)

	// Object functions (stubs for Phase 2)
	ctx.RegisterFunction("NAME", fnName, 1, 0)
	ctx.RegisterFunction("NUM", fnNum, 1, 0)
	ctx.RegisterFunction("LOC", fnLoc, 1, 0)
	ctx.RegisterFunction("OWNER", fnOwner, 1, 0)
	ctx.RegisterFunction("TYPE", fnType, 1, 0)
	ctx.RegisterFunction("FLAGS", fnFlags, 1, 0)
	ctx.RegisterFunction("HASFLAG", fnHasflag, 2, 0)
	ctx.RegisterFunction("HASATTR", fnHasattr, 2, 0)
	ctx.RegisterFunction("GET", fnGet, 1, 0)
	ctx.RegisterFunction("XGET", fnXget, 2, 0)
	ctx.RegisterFunction("V", fnV, 1, 0)
	ctx.RegisterFunction("U", fnU, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ULOCAL", fnUlocal, 0, eval.FnVarArgs)
	ctx.RegisterFunction("S", fnS, 1, 0)
	ctx.RegisterFunction("OBJEVAL", fnObjeval, 2, eval.FnNoEval)
	ctx.RegisterFunction("DEFAULT", fnDefault, 2, eval.FnNoEval)
	ctx.RegisterFunction("CON", fnCon, 1, 0)
	ctx.RegisterFunction("EXIT", fnExit, 1, 0)
	ctx.RegisterFunction("NEXT", fnNext, 1, 0)
	ctx.RegisterFunction("LCON", fnLcon, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LEXITS", fnLexits, 0, eval.FnVarArgs)
	ctx.RegisterFunction("EXITS", fnLexits, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LATTR", fnLattr, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NATTR", fnNattr, 1, 0)
	ctx.RegisterFunction("HOME", fnHome, 1, 0)
	ctx.RegisterFunction("PARENT", fnParent, 1, 0)
	ctx.RegisterFunction("ZONE", fnZone, 1, 0)
	ctx.RegisterFunction("CONTROLS", fnControls, 2, 0)
	ctx.RegisterFunction("ROOM", fnRoom, 1, 0)

	// Connection functions
	ctx.RegisterFunction("LWHO", fnLwho, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MWHO", fnMwho, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CONN", fnConn, 1, 0)
	ctx.RegisterFunction("IDLE", fnIdleFn, 1, 0)
	ctx.RegisterFunction("DOING", fnDoingFn, 1, 0)
	ctx.RegisterFunction("PMATCH", fnPmatch, 1, 0)

	// Additional object query functions
	ctx.RegisterFunction("HASTYPE", fnHastype, 2, 0)
	ctx.RegisterFunction("CHILDREN", fnChildren, 1, 0)
	ctx.RegisterFunction("LPARENT", fnLparent, 1, 0)
	ctx.RegisterFunction("ENTRANCES", fnEntrances, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LOCATE", fnLocate, 0, eval.FnVarArgs)
	ctx.RegisterFunction("RLOC", fnRloc, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NEARBY", fnNearby, 2, 0)
	ctx.RegisterFunction("ELOCK", fnElock, 2, 0)
	ctx.RegisterFunction("LOCK", fnLockFn, 1, 0)

	// Additional object functions
	ctx.RegisterFunction("HASATTRP", fnHasattrp, 2, 0)
	ctx.RegisterFunction("FULLNAME", fnFullname, 1, 0)
	ctx.RegisterFunction("GET_EVAL", fnGetEval, 1, 0)
	ctx.RegisterFunction("EDEFAULT", fnEdefault, 2, eval.FnNoEval)
	ctx.RegisterFunction("MONEY", fnMoney, 1, 0)
	ctx.RegisterFunction("GREP", fnGrep, 3, 0)
	ctx.RegisterFunction("GREPI", fnGrepi, 3, 0)
	ctx.RegisterFunction("ANDFLAGS", fnAndflags, 2, 0)
	ctx.RegisterFunction("ORFLAGS", fnOrflags, 2, 0)
	ctx.RegisterFunction("HASFLAGS", fnHasflags, 2, 0)
	ctx.RegisterFunction("HASPOWER", fnHaspower, 2, 0)
	ctx.RegisterFunction("FINDABLE", fnFindable, 2, 0)
	ctx.RegisterFunction("SEES", fnSees, 2, 0)
	ctx.RegisterFunction("VISIBLE", fnVisible, 2, 0)
	ctx.RegisterFunction("WHERE", fnWhere, 1, 0)
	ctx.RegisterFunction("XCON", fnXcon, 1, 0)
	ctx.RegisterFunction("INZONE", fnInzone, 2, 0)
	ctx.RegisterFunction("ZWHO", fnZwho, 1, 0)
	ctx.RegisterFunction("ZFUN", fnZfun, 0, eval.FnVarArgs)

	// Pronoun functions
	ctx.RegisterFunction("SUBJ", fnSubj, 1, 0)
	ctx.RegisterFunction("OBJ", fnObj, 1, 0)
	ctx.RegisterFunction("POSS", fnPoss, 1, 0)
	ctx.RegisterFunction("APOSS", fnAposs, 1, 0)

	// Timestamp functions
	ctx.RegisterFunction("LASTACCESS", fnLastaccess, 1, 0)
	ctx.RegisterFunction("LASTMOD", fnLastmod, 1, 0)
	ctx.RegisterFunction("LASTCREATE", fnLastcreate, 1, 0)
	ctx.RegisterFunction("OBJMEM", fnObjmem, 1, 0)

	// Formatting functions
	ctx.RegisterFunction("WRAP", fnWrap, 0, eval.FnVarArgs)
	ctx.RegisterFunction("COLUMNS", fnColumns, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TABLE", fnTable, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TABLES", fnTables, 0, eval.FnVarArgs)
	ctx.RegisterFunction("RTABLES", fnRtables, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CTABLES", fnCtables, 0, eval.FnVarArgs)

	// Side-effect functions
	ctx.RegisterFunction("PEMIT", fnPemit, 2, 0)
	ctx.RegisterFunction("REMIT", fnRemit, 2, 0)
	ctx.RegisterFunction("OEMIT", fnOemit, 2, 0)
	ctx.RegisterFunction("THINK", fnThink, 1, 0)
	ctx.RegisterFunction("SET", fnSet, 2, 0)
	ctx.RegisterFunction("CREATE", fnCreate, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TEL", fnTel, 2, 0)
	ctx.RegisterFunction("LINK", fnLink, 2, 0)
	ctx.RegisterFunction("TRIGGER", fnTrigger, 0, eval.FnVarArgs)
	ctx.RegisterFunction("WIPE", fnWipe, 1, 0)
	ctx.RegisterFunction("FORCE", fnForce, 2, 0)
	ctx.RegisterFunction("WAIT", fnWait, 2, 0)

	// Spellcheck
	ctx.RegisterFunction("SPELL", fnSpell, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SPELLCHECK", fnSpellcheck, 0, eval.FnVarArgs)

	// Encoding/hashing
	ctx.RegisterFunction("ENCODE64", fnEncode64, 1, 0)
	ctx.RegisterFunction("DECODE64", fnDecode64, 1, 0)
	ctx.RegisterFunction("DIGEST", fnDigest, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CRC32", fnCrc32, 1, 0)

	// Database / SQL
	ctx.RegisterFunction("SQL", fnSQL, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SQLESCAPE", fnSQLEscape, 1, 0)

	// Regex functions
	ctx.RegisterFunction("REGMATCH", fnRegmatch, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGMATCHI", fnRegmatchi, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGEDIT", fnRegedit, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGEDITI", fnRegediti, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGEDITALL", fnRegeditall, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGEDITALLI", fnRegeditalli, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGRAB", fnRegrab, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGRABI", fnRegrabi, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGRABALL", fnRegraball, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGRABALLI", fnRegraballi, 0, eval.FnVarArgs)
	ctx.RegisterFunction("REGREP", fnRegrep, 3, 0)
	ctx.RegisterFunction("REGREPI", fnRegrepi, 3, 0)

	// Stack functions
	ctx.RegisterFunction("PUSH", fnPush, 1, 0)
	ctx.RegisterFunction("POP", fnPop, 0, 0)
	ctx.RegisterFunction("PEEK", fnPeek, 0, eval.FnVarArgs)
	ctx.RegisterFunction("EMPTY", fnEmpty, 0, 0)
	ctx.RegisterFunction("LSTACK", fnLstack, 0, eval.FnVarArgs)
	ctx.RegisterFunction("DUP", fnDup, 0, 0)
	ctx.RegisterFunction("SWAP", fnSwap, 0, 0)
	ctx.RegisterFunction("POPN", fnPopn, 0, eval.FnVarArgs)
	ctx.RegisterFunction("TOSS", fnToss, 0, 0)

	// Misc
	ctx.RegisterFunction("NULL", fnNull, 1, 0)
	ctx.RegisterFunction("@@", fnNull, 1, eval.FnVarArgs|eval.FnNoEval)
	ctx.RegisterFunction("LIT", fnLit, 1, eval.FnNoEval)
	ctx.RegisterFunction("SUBEVAL", fnSubeval, 1, 0)
	ctx.RegisterFunction("RAND", fnRand, 1, 0)
	ctx.RegisterFunction("DIE", fnDie, 2, 0)
	ctx.RegisterFunction("LRAND", fnLrand, 3, eval.FnVarArgs)
	ctx.RegisterFunction("TIME", fnTime, 0, 0)
	ctx.RegisterFunction("SECS", fnSecs, 0, 0)
	ctx.RegisterFunction("CONVSECS", fnConvsecs, 1, 0)
	ctx.RegisterFunction("CONVTIME", fnConvtime, 1, 0)
	ctx.RegisterFunction("TIMEFMT", fnTimefmt, 0, eval.FnVarArgs)
	ctx.RegisterFunction("STARTTIME", fnStarttime, 0, 0)
	ctx.RegisterFunction("RESTARTTIME", fnRestarttime, 0, 0)
	ctx.RegisterFunction("PORTS", fnPorts, 1, 0)
	ctx.RegisterFunction("CONNRECORD", fnConnrecord, 0, 0)
	ctx.RegisterFunction("FCOUNT", fnFcount, 0, 0)
	ctx.RegisterFunction("FDEPTH", fnFdepth, 0, 0)
	ctx.RegisterFunction("CONFIG", fnConfig, 1, 0)
	ctx.RegisterFunction("EVAL", fnEvalFn, 2, 0)
	ctx.RegisterFunction("BEEP", fnBeep, 0, 0)
	ctx.RegisterFunction("SEARCH", fnSearch, 0, eval.FnVarArgs)
	ctx.RegisterFunction("STATS", fnStats, 0, eval.FnVarArgs)
	ctx.RegisterFunction("HASMODULE", fnHasmodule, 1, 0)
	ctx.RegisterFunction("RESTARTS", fnRestarts, 0, 0)
	ctx.RegisterFunction("HEARS", fnHears, 2, 0)
	ctx.RegisterFunction("KNOWS", fnKnows, 2, 0)
	ctx.RegisterFunction("MOVES", fnMoves, 2, 0)
	ctx.RegisterFunction("WRITABLE", fnWritable, 2, 0)
	ctx.RegisterFunction("PFIND", fnPfind, 1, 0)
	ctx.RegisterFunction("VERSION", fnVersion, 0, 0)
	ctx.RegisterFunction("MUDNAME", fnMudname, 0, 0)
	ctx.RegisterFunction("VALID", fnValid, 2, eval.FnVarArgs)
	ctx.RegisterFunction("IBREAK", fnIbreak, 0, eval.FnVarArgs)
	ctx.RegisterFunction("RANDEXTRACT", fnRandextract, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ELEMENTPOS", fnElementpos, 0, eval.FnVarArgs)
	ctx.RegisterFunction("PLAYMEM", fnPlaymem, 1, 0)
	ctx.RegisterFunction("OBJID", fnObjid, 1, 0)
	ctx.RegisterFunction("CREATETIME", fnCreatetime, 1, 0)
	ctx.RegisterFunction("REGPARSE", fnRegparse, 3, 0)
	ctx.RegisterFunction("REGPARSEI", fnRegparsei, 3, 0)

	// TinyMUSH C gap closures
	ctx.RegisterFunction("CCOUNT", fnCcount, 0, 0)
	ctx.RegisterFunction("CDEPTH", fnCdepth, 0, 0)
	ctx.RegisterFunction("COMMAND", fnCommand, 0, 0)
	ctx.RegisterFunction("LVARS", fnLvars, 0, 0)
	ctx.RegisterFunction("PROGRAMMER", fnProgrammer, 1, 0)
	ctx.RegisterFunction("WILDPARSE", fnWildparse, 3, 0)
	ctx.RegisterFunction("ELOCKSTR", fnElockstr, 3, 0)
	ctx.RegisterFunction("SESSION", fnSession, 1, 0)
	ctx.RegisterFunction("HELPTEXT", fnHelptext, 2, 0)
	ctx.RegisterFunction("OBJCALL", fnObjcall, 0, eval.FnVarArgs)

	// RhostMUSH extension: string functions
	ctx.RegisterFunction("ASC", fnAsc, 1, 0)
	ctx.RegisterFunction("CHR", fnChr, 1, 0)
	ctx.RegisterFunction("STRIP", fnStrip, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CAPLIST", fnCaplist, 0, eval.FnVarArgs)
	ctx.RegisterFunction("SPELLNUM", fnSpellnum, 1, 0)
	ctx.RegisterFunction("SOUNDEX", fnSoundex, 1, 0)
	ctx.RegisterFunction("SOUNDLIKE", fnSoundlike, 2, 0)
	ctx.RegisterFunction("GARBLE", fnGarble, 0, eval.FnVarArgs)

	// RhostMUSH extension: math functions
	ctx.RegisterFunction("BETWEEN", fnBetween, 3, 0)
	ctx.RegisterFunction("COSH", fnCosh, 1, 0)
	ctx.RegisterFunction("SINH", fnSinh, 1, 0)
	ctx.RegisterFunction("TANH", fnTanh, 1, 0)
	ctx.RegisterFunction("FMOD", fnFmod, 2, 0)
	ctx.RegisterFunction("TOBIN", fnTobin, 1, 0)
	ctx.RegisterFunction("TODEC", fnTodec, 1, 0)
	ctx.RegisterFunction("TOHEX", fnTohex, 1, 0)
	ctx.RegisterFunction("TOOCT", fnTooct, 1, 0)
	ctx.RegisterFunction("ROMAN", fnRoman, 1, 0)
	ctx.RegisterFunction("NAND", fnNand, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NOR", fnNor, 0, eval.FnVarArgs)
	ctx.RegisterFunction("XNOR", fnXnor, 0, eval.FnVarArgs)

	// RhostMUSH extension: list functions
	ctx.RegisterFunction("LAVG", fnLavg, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LSUB", fnLsub, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LMUL", fnLmul, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LDIV", fnLdiv, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LISTMATCH", fnListmatch, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NUMMATCH", fnNummatch, 0, eval.FnVarArgs)
	ctx.RegisterFunction("NUMMEMBER", fnNummember, 0, eval.FnVarArgs)

	// RhostMUSH extension: object/misc functions
	ctx.RegisterFunction("LCMDS", fnLcmds, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ATTRCNT", fnAttrcnt, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ISOBJID", fnIsobjid, 1, 0)
	ctx.RegisterFunction("SINGLETIME", fnSingletime, 1, 0)
	ctx.RegisterFunction("LROOMS", fnLrooms, 0, eval.FnVarArgs)

	// Flight/navigation functions
	ctx.RegisterFunction("HVEC", fnHvec, 1, 0)
	ctx.RegisterFunction("HDELTA", fnHdelta, 2, 0)
	ctx.RegisterFunction("HNAME", fnHname, 0, eval.FnVarArgs)
	ctx.RegisterFunction("H2DEG", fnH2deg, 1, 0)
	ctx.RegisterFunction("DEG2H", fnDeg2h, 1, 0)
	ctx.RegisterFunction("VEC2H", fnVec2h, 2, 0)
	ctx.RegisterFunction("GRIDABS", fnGridabs, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ABSGRID", fnAbsgrid, 2, 0)
	ctx.RegisterFunction("GRIDDIST", fnGriddist, 2, 0)
	ctx.RegisterFunction("GRIDCOURSE", fnGridcourse, 2, 0)
	ctx.RegisterFunction("GRIDNAV", fnGridnav, 0, eval.FnVarArgs)
	ctx.RegisterFunction("VRAND", fnVrand, 0, eval.FnVarArgs)
	ctx.RegisterFunction("VRANDC", fnVrandc, 1, 0)
	ctx.RegisterFunction("DRIFT", fnDrift, 2, 0)
	ctx.RegisterFunction("BEARING", fnBearing, 2, 0)
	ctx.RegisterFunction("PITCH", fnPitch, 2, 0)
	ctx.RegisterFunction("CLOSING", fnClosing, 6, 0)
	ctx.RegisterFunction("RELVEL", fnRelvel, 4, 0)
	ctx.RegisterFunction("ETA", fnEta, 4, 0)
	ctx.RegisterFunction("INTERCEPT", fnIntercept, 5, 0)
	ctx.RegisterFunction("ALTCLAMP", fnAltclamp, 1, 0)
	ctx.RegisterFunction("GRIDLOCFULL", fnGridlocfull, 3, 0)
	ctx.RegisterFunction("GRIDPARSEFULL", fnGridparsefull, 1, 0)
	ctx.RegisterFunction("GPS", fnGps, 0, eval.FnVarArgs)
	ctx.RegisterFunction("GRIDDIST3D", fnGriddist3d, 2, 0)
	ctx.RegisterFunction("MAPINSTANCE", fnMapinstance, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MAPPARSE", fnMapparse, 2, 0)
	ctx.RegisterFunction("POIFORMAT", fnPoiformat, 0, eval.FnVarArgs)
	ctx.RegisterFunction("POIPARSE", fnPoiparse, 2, 0)
	ctx.RegisterFunction("POIINRANGE", fnPoiinrange, 3, 0)
	ctx.RegisterFunction("POIDIST", fnPoidist, 2, 0)
	ctx.RegisterFunction("POIBEARING", fnPoibearing, 2, 0)

	// Mail system
	ctx.RegisterFunction("MAIL", fnMail, 0, eval.FnVarArgs)
	ctx.RegisterFunction("MAILFROM", fnMailfrom, 1, 0)
	ctx.RegisterFunction("MAILSUBJ", fnMailsubj, 1, 0)

	// Channel/Comsys functions
	ctx.RegisterFunction("CINFO", fnCinfo, 2, 0)

	// Attribute definition functions
	ctx.RegisterFunction("LATTRDEF", fnLattrdef, 0, eval.FnVarArgs)
	ctx.RegisterFunction("ATTRDEFFLAGS", fnAttrdefflags, 1, 0)
	ctx.RegisterFunction("HASATTRDEF", fnHasattrdef, 1, 0)
	ctx.RegisterFunction("SETATTRDEF", fnSetattrdef, 2, 0)

	// Structure/instance system
	ctx.RegisterFunction("STRUCTURE", fnStructure, 0, eval.FnVarArgs)
	ctx.RegisterFunction("CONSTRUCT", fnConstruct, 0, eval.FnVarArgs)
	ctx.RegisterFunction("DESTRUCT", fnDestruct, 1, 0)
	ctx.RegisterFunction("UNSTRUCTURE", fnUnstructure, 1, 0)
	ctx.RegisterFunction("Z", fnZ, 2, 0)
	ctx.RegisterFunction("MODIFY", fnModify, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LOAD", fnLoadStruct, 0, eval.FnVarArgs)
	ctx.RegisterFunction("UNLOAD", fnUnload, 0, eval.FnVarArgs)
	ctx.RegisterFunction("READ", fnReadStruct, 3, 0)
	ctx.RegisterFunction("WRITE", fnWriteStruct, 2, 0)
	ctx.RegisterFunction("DELIMIT", fnDelimit, 0, eval.FnVarArgs)
	ctx.RegisterFunction("LSTRUCTURES", fnLstructures, 0, 0)
	ctx.RegisterFunction("LINSTANCES", fnLinstances, 0, 0)
	ctx.RegisterFunction("STORE", fnStore, 2, 0)
	ctx.RegisterFunction("ITEMS", fnItems, 1, 0)
}
